<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>#{productoDialogView.modoEdicion ? 'Editar' : 'Nuevo'} Producto</title>
    <style>
        /* Scrollbar para el dialog cuando el contenido exceda la altura */
        .dialog-content-scroll {
            max-height: 450px;
            overflow-y: auto;
            padding-right: 10px;
        }

        /* Personalizar scrollbar */
        .dialog-content-scroll::-webkit-scrollbar {
            width: 8px;
        }

        .dialog-content-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .dialog-content-scroll::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }

        .dialog-content-scroll::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</h:head>

<h:body>
    <h:form id="formProductoDialog">

        <p:messages id="dialogMessages" closable="true"/>

        <!-- Contenedor con scroll -->
        <div class="dialog-content-scroll">
            <p:panelGrid columns="2" layout="grid" styleClass="ui-fluid">

                <p:outputLabel for="codigo" value="C贸digo:" style="font-weight: bold;"/>
                <p:inputText id="codigo"
                             value="#{productoDialogView.producto.codigo}"
                             required="true"
                             requiredMessage="El c贸digo es obligatorio"
                             maxlength="50"
                             placeholder="Ej: PROD-001"/>

                <p:outputLabel for="nombre" value="Nombre:" style="font-weight: bold;"/>
                <p:inputText id="nombre"
                             value="#{productoDialogView.producto.nombre}"
                             required="true"
                             requiredMessage="El nombre es obligatorio"
                             maxlength="200"
                             placeholder="Nombre del producto"/>

                <p:outputLabel for="descripcion" value="Descripci贸n:"/>
                <p:inputTextarea id="descripcion"
                                 value="#{productoDialogView.producto.descripcion}"
                                 rows="3"
                                 maxlength="500"
                                 placeholder="Descripci贸n detallada del producto"/>

                <p:outputLabel for="unidadMedida" value="Unidad de Medida:" style="font-weight: bold;"/>
                <p:inputText id="unidadMedida"
                             value="#{productoDialogView.producto.unidadMedida}"
                             required="true"
                             requiredMessage="La unidad de medida es obligatoria"
                             maxlength="20"
                             placeholder="Ej: UNIDAD, CAJA, KG, LITRO"/>

                <p:outputLabel for="precio" value="Precio:" style="font-weight: bold;"/>
                <p:inputNumber id="precio"
                               value="#{productoDialogView.producto.precio}"
                               required="true"
                               requiredMessage="El precio es obligatorio"
                               decimalPlaces="2"
                               minValue="0.01"
                               symbol="$ "
                               placeholder="0.00"/>

                <p:outputLabel for="proveedor" value="Proveedor:" style="font-weight: bold;"/>
                <p:selectOneMenu id="proveedor"
                                 value="#{productoDialogView.producto.proveedorId}"
                                 required="true"
                                 requiredMessage="Debe seleccionar un proveedor">
                    <f:selectItem itemLabel="-- Seleccione un proveedor --" itemValue="#{null}"/>
                    <f:selectItems value="#{productoDialogView.proveedoresDisponibles}"
                                   var="prov"
                                   itemLabel="#{prov.razonSocial}"
                                   itemValue="#{prov.id}"/>
                </p:selectOneMenu>

                <p:outputLabel for="activo" value="Activo:"/>
                <p:selectBooleanCheckbox id="activo"
                                         value="#{productoDialogView.producto.activo}"/>

            </p:panelGrid>
        </div>

        <!-- Botones fuera del scroll -->
        <div style="text-align: right; margin-top: 15px; padding-top: 10px; border-top: 1px solid #dee2e6;">
            <p:commandButton value="Guardar"
                             icon="pi pi-save"
                             styleClass="ui-button-success"
                             action="#{productoDialogView.guardar()}"
                             update="dialogMessages"
                             process="@form"
                             style="margin-right: 5px;"/>

            <p:commandButton value="Cancelar"
                             icon="pi pi-times"
                             styleClass="ui-button-secondary"
                             action="#{productoDialogView.cancelar()}"
                             process="@this"
                             immediate="true"/>
        </div>

    </h:form>
</h:body>
</html>