<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="jakarta.faces.core">

<h:head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title><ui:insert name="title">Gestión de Proveedores</ui:insert></title>

    <!-- PrimeFlex CSS (Responsive Grid System) -->
    <h:outputStylesheet library="webjars" name="primeflex/3.3.1/primeflex.min.css"/>

    <!-- Custom Styles -->
    <h:outputStylesheet library="css" name="styles.css"/>
</h:head>

<h:body>

    <div class="layout-wrapper">

        <!-- SIDEBAR -->
        <aside class="layout-sidebar">

            <div class="sidebar-header">
                <i class="pi pi-building"></i>
                <h3>Gestión Proveedores</h3>
                <p>Sistema Empresarial</p>
            </div>

            <h:form id="sidebarForm">
                <p:panelMenu styleClass="sidebar-menu">

                    <p:submenu label="Dashboard" icon="pi pi-home" expanded="true">
                        <p:menuitem value="Inicio" icon="pi pi-chart-line"
                                    outcome="/index.xhtml"/>
                    </p:submenu>
                    <p:submenu label="Gestión" icon="pi pi-briefcase" expanded="true">
                        <p:menuitem value="Proveedores" icon="pi pi-users"
                                    outcome="/proveedores/listar.xhtml"/>
                        <p:menuitem value="Productos" icon="pi pi-box"
                                    outcome="/productos/listar.xhtml"/>
                        <p:menuitem value="Órdenes de Compra" icon="pi pi-shopping-cart"
                                    outcome="/ordenes/listar.xhtml"/>
                    </p:submenu>

                    <p:submenu label="Reportes" icon="pi pi-file">
                        <p:menuitem
                                value="Proveedores"
                                icon="pi pi-file-pdf"
                                url="http://localhost:8081/api/reportes/proveedores/pdf"
                                target="_blank" />
                        <p:menuitem value="Productos" icon="pi pi-file-excel"
                                    disabled="true"/>
                        <p:menuitem value="Órdenes" icon="pi pi-chart-pie"
                                    disabled="true"/>
                    </p:submenu>

                </p:panelMenu>
            </h:form>

            <div class="sidebar-footer">
                <p>
                    <i class="pi pi-user"></i>
                    <h:outputText value="#{authBean.nombreUsuario}"/>
                </p>
                <p>
                    <i class="pi pi-shield"></i>
                    <h:outputText value="#{authBean.usuarioActual.rol}"/>
                </p>
                <p class="version">v1.0.0</p>
            </div>

            <!-- En el topbar, actualiza los botones: -->
            <div class="topbar-right">
                <h:form>
                    <p:commandButton value="Cerrar Sesión"
                                     icon="pi pi-sign-out"
                                     styleClass="ui-button-danger"
                                     action="#{authBean.logout()}"
                                     title="Cerrar Sesión"/>
                </h:form>
            </div>

        </aside>

        <!-- MAIN CONTENT -->
        <div class="layout-main">

            <!-- TOP BAR -->
            <header class="layout-topbar">
                <div class="topbar-left">
                    <h2><ui:insert name="pageTitle">Dashboard</ui:insert></h2>
                </div>
                <div class="topbar-right">
                    <h:form>
                        <p:commandButton icon="pi pi-bell"
                                         styleClass="p-button-rounded p-button-text"
                                         title="Notificaciones"/>
                        <p:commandButton icon="pi pi-envelope"
                                         styleClass="p-button-rounded p-button-text"
                                         title="Mensajes"/>
                        <p:commandButton icon="pi pi-user"
                                         styleClass="p-button-rounded p-button-text"
                                         title="Perfil"/>
                    </h:form>
                </div>
            </header>

            <!-- CONTENT -->
            <main class="layout-content">
                <p:growl id="messages" showDetail="true" life="4000"/>

                <ui:insert name="content">
                    <p>Contenido por defecto</p>
                </ui:insert>
            </main>

            <!-- FOOTER -->
            <footer class="layout-footer">
                <p>
                    <span>© 2025 Sistema de Gestión de Proveedores</span>
                    <span class="separator">|</span>
                    <span>Powered by JSF 4.0 + PrimeFaces 14.0</span>
                </p>
            </footer>

        </div>

    </div>

</h:body>
</html>